.. _in-game-menus:

=============
游戏内菜单
=============

在许多视觉系小说中，用户会在被要求为故事情节的走向做出选择。Ren'Py脚本语言中包含了menu语句，使得向用户展现选项十分容易。

这里有个menu语句的样例：

::

    menu:
         "我应该干嘛？"

         "喝咖啡":
             "我喝了咖啡，每一口都非常棒。"

         "喝茶":
             $ drank_tea = True

             "我喝了茶，并努力使讲话不像发表政治声明。"

         "跪拜礼":
             jump genuflect_ending

    label after_menu:

         "喝完饮料后，开始继续我的晨间时光。"

menu语句以关键词 ``menu`` 开头。后面可能跟着一个脚本标签(label)名，该文本标签(label)下的语句块可以被预处理为菜单选项。举例如下：

::

    menu drink_menu:
        ...

menu语句后面跟着一个缩进的语句块(block)。该语句块(block)可能包含一条 :ref:`say语句 <say-statement>`，且必须包含至少一个菜单选项。若存在那条say语句，发言内容与菜单选项会同时在界面上显示。

**菜单选项。**
菜单选项是用户在游戏内菜单中的可选项。菜单选项以一个字符串开头。该字符串后面可能跟一个if分句。这个if分句增加了不同情况下的选项是否出现的功能。菜单选项以英文冒号结束，下面必须跟着一个Ren'Py语句块。

当某个选项被选中，该选项下对应的语句块(block)就会执行。执行到那个语句块结尾时，会跳转到menu语句结尾并执行之后的脚本。

if分句包含关键词 ``if`` ，后面跟着一个python表达式。只有当表达式为True时，该菜单选项才会显示。例如下面的菜单中：

::

    menu:
        "向左":
            ...
        "向右":
            ...
        "向前看" if drank_tea:
            ...

只有在“the drank_tea”变量为True时才显示第三个选项。
